
<h1 class="sectionedit1" id="laravel_testing">Laravel Testing</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laravel Testing" [1-31] -->
<h1 class="sectionedit2" id="unit_test">1. Unit Test</h1>
<div class="level1">

</div>
<!-- EDIT2 SECTION "1. Unit Test" [32-59] -->
<h2 class="sectionedit3" id="giới_thiệu">1.1 Giới thiệu</h2>
<div class="level2">

<p>
Laravel được tích hợp sẵn PHPUnit. Sau khi cài xong Laravel bạn có thể chạy câu lệnh sau để test.
</p>
<pre class="code">$ phpunit</pre>

<p>
<a href="/lib/exe/detail.php?id=testing&amp;media=capture_2015_08_27_13_38_38_794.png" class="media" title="capture_2015_08_27_13_38_38_794.png"><img src="/lib/exe/fetch.php?media=capture_2015_08_27_13_38_38_794.png" class="media" title="PHP Unit" alt="PHP Unit" /></a>
</p>

</div>
<!-- EDIT3 SECTION "1.1 Giới thiệu" [60-289] -->
<h2 class="sectionedit4" id="dịnh_nghia_chạy_test">1.2 Định nghĩa &amp; chạy Test</h2>
<div class="level2">

<p>
Các file test được đặt trong thư mục /tests, và thường được extend từ class TestCase. Ví dụ:
</p>
<pre class="code php"><span class="kw2">class</span> FooTest <span class="kw2">extends</span> TestCase <span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> testSomethingIsTrue<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertTrue</span><span class="br0">&#40;</span><span class="kw4">true</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT4 SECTION "1.2 Định nghĩa & chạy Test" [290-597] -->
<h2 class="sectionedit5" id="moi_truờng_test">1.3 Môi trường test</h2>
<div class="level2">

<p>
Khi chạy Unit Test, Laravel sẽ tự động cấu hình môi trường là testing.
Cấu hình môi trường test được đặt trong file phpunit.xml
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=2" title="Download Snippet" class="mediafile mf_xml">phpunit.xml</a></dt>
<dd><pre class="code file xml"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span><span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;phpunit</span> <span class="re0">backupGlobals</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">         <span class="re0">backupStaticAttributes</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">         <span class="re0">bootstrap</span>=<span class="st0">&quot;bootstrap/autoload.php&quot;</span></span>
<span class="sc3">         <span class="re0">colors</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">         <span class="re0">convertErrorsToExceptions</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">         <span class="re0">convertNoticesToExceptions</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">         <span class="re0">convertWarningsToExceptions</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">         <span class="re0">processIsolation</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">         <span class="re0">stopOnFailure</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">         <span class="re0">syntaxCheck</span>=<span class="st0">&quot;false&quot;</span><span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;testsuites<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;testsuite</span> <span class="re0">name</span>=<span class="st0">&quot;Application Test Suite&quot;</span><span class="re2">&gt;</span></span>
            <span class="sc3"><span class="re1">&lt;directory<span class="re2">&gt;</span></span></span>./tests/<span class="sc3"><span class="re1">&lt;/directory<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;/testsuite<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/testsuites<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;filter<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;whitelist<span class="re2">&gt;</span></span></span>
            <span class="sc3"><span class="re1">&lt;directory</span> <span class="re0">suffix</span>=<span class="st0">&quot;.php&quot;</span><span class="re2">&gt;</span></span>app/<span class="sc3"><span class="re1">&lt;/directory<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;/whitelist<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/filter<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;php<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;env</span> <span class="re0">name</span>=<span class="st0">&quot;APP_ENV&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;testing&quot;</span><span class="re2">/&gt;</span></span>
        <span class="sc3"><span class="re1">&lt;env</span> <span class="re0">name</span>=<span class="st0">&quot;CACHE_DRIVER&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;array&quot;</span><span class="re2">/&gt;</span></span>
        <span class="sc3"><span class="re1">&lt;env</span> <span class="re0">name</span>=<span class="st0">&quot;SESSION_DRIVER&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;array&quot;</span><span class="re2">/&gt;</span></span>
        <span class="sc3"><span class="re1">&lt;env</span> <span class="re0">name</span>=<span class="st0">&quot;QUEUE_DRIVER&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;sync&quot;</span><span class="re2">/&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;/php<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/phpunit<span class="re2">&gt;</span></span></span></pre>
</dd></dl>

</div>
<!-- EDIT5 SECTION "1.3 Môi trường test" [598-1724] -->
<h2 class="sectionedit6" id="gọi_cac_thanh_phần_trong_test_class">1.4 Gọi các thành phần trong test class</h2>
<div class="level2">

</div>
<!-- EDIT6 SECTION "1.4 Gọi các thành phần trong test class" [1725-1782] -->
<h3 class="sectionedit7" id="gọi_route">1.4.1 Gọi route</h3>
<div class="level3">

<p>
Ta có thể gọi 1 route từ class Test bằng phương thức call.
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=3" title="Download Snippet" class="mediafile mf_php">ExampleTest.php</a></dt>
<dd><pre class="code file php"><span class="co1">// Full feature</span>
<span class="re0">$response1</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="re0">$method</span><span class="sy0">,</span> <span class="re0">$uri</span><span class="sy0">,</span> <span class="re0">$parameters</span><span class="sy0">,</span> <span class="re0">$cookies</span><span class="sy0">,</span> <span class="re0">$files</span><span class="sy0">,</span> <span class="re0">$server</span><span class="sy0">,</span> <span class="re0">$content</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Gọi https</span>
<span class="re0">$response2</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">callSecure</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'foo/bar'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">// Gọi phương thức GET với địa chỉ là testRouting</span>
<span class="re0">$response</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'testRouting'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp;
&nbsp;
<span class="co1">// VD: Kiểm tra link testRouting có nội dung Hello World hay không ?</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertEquals</span><span class="br0">&#40;</span><span class="st_h">'Hello World'</span><span class="sy0">,</span> <span class="re0">$response</span><span class="sy0">-&gt;</span><span class="me1">getContent</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>

<p>
Trong file routes.php thêm 1 routing testRouting:
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=4" title="Download Snippet" class="mediafile mf_php">routes.php</a></dt>
<dd><pre class="code file php">Route<span class="sy0">::</span><span class="me2">get</span><span class="br0">&#40;</span><span class="st_h">'testRouting'</span><span class="sy0">,</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="st_h">'Hello World'</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>

</div>
<!-- EDIT7 SECTION "1.4.1 Gọi route" [1783-2495] -->
<h3 class="sectionedit8" id="gọi_controller">1.4.2 Gọi Controller</h3>
<div class="level3">

<p>
Ta có thể gọi 1 action trong controller với phương thức và các tham số.
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=5" title="Download Snippet" class="mediafile mf_php">ExampleTest.php</a></dt>
<dd><pre class="code file php"><span class="kw2">public</span> <span class="kw2">function</span> testController<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="re0">$response1</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">action</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'HomeController@index'</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="re0">$response2</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">action</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'UserController@profile'</span><span class="sy0">,</span> <span class="br0">&#91;</span><span class="st_h">'user'</span> <span class="sy0">=&gt;</span> <span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="co1">// Kiểm tra giá trị View trả về</span>
    <span class="co1">// $view = $response-&gt;original;</span>
    <span class="co1">// $this-&gt;assertEquals('John', $view['name']);</span>
&nbsp;
&nbsp;
    <span class="co1">// VD: kiểm tra action test trong controller test có trả về giá trị OK hay ko ?</span>
    <span class="re0">$response</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">action</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'TestController@index'</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertEquals</span><span class="br0">&#40;</span><span class="st_h">'index'</span><span class="sy0">,</span> <span class="re0">$response</span><span class="sy0">-&gt;</span><span class="me1">getContent</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>    </pre>
</dd></dl>

<p>
Để kết quả test trả về đúng ta sửa action index trong file TestController.php như sau:
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=6" title="Download Snippet" class="mediafile mf_php">TestController.php</a></dt>
<dd><pre class="code file php"><span class="kw2">public</span> <span class="kw2">function</span> index<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="st_h">'index'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span></pre>
</dd></dl>

</div>
<!-- EDIT8 SECTION "1.4.2 Gọi Controller" [2496-3393] -->
<h3 class="sectionedit9" id="mocking_facades">1.4.3 Mocking Facades</h3>
<div class="level3">

</div>
<!-- EDIT9 SECTION "1.4.3 Mocking Facades" [3394-3430] -->
<h3 class="sectionedit10" id="framework_assertions">1.4.4 Framework Assertions</h3>
<div class="level3">

</div>
<!-- EDIT10 SECTION "1.4.4 Framework Assertions" [3431-3468] -->
<h3 class="sectionedit11" id="assertresponseok">assertResponseOk</h3>
<div class="level3">

<p>
Asserting Responses Are OK
</p>
<pre class="code php"><span class="kw2">public</span> <span class="kw2">function</span> testMethod<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'/'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertResponseOk</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT11 SECTION "assertResponseOk" [3469-3636] -->
<h3 class="sectionedit12" id="assertresponsestatus">assertResponseStatus</h3>
<div class="level3">

<p>
Asserting Response Statuses
</p>
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertResponseStatus</span><span class="br0">&#40;</span><span class="nu0">403</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT12 SECTION "assertResponseStatus" [3637-3748] -->
<h3 class="sectionedit13" id="assertredirectedto">assertRedirectedTo</h3>
<div class="level3">

<p>
Asserting Responses Are Redirects
</p>
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertRedirectedTo</span><span class="br0">&#40;</span><span class="st_h">'foo'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertRedirectedToRoute</span><span class="br0">&#40;</span><span class="st_h">'route.name'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertRedirectedToAction</span><span class="br0">&#40;</span><span class="st_h">'Controller@method'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT13 SECTION "assertRedirectedTo" [3749-3967] -->
<h3 class="sectionedit14" id="assertviewhas">assertViewHas</h3>
<div class="level3">

<p>
Asserting A View Has Some Data
</p>
<pre class="code php"><span class="kw2">public</span> <span class="kw2">function</span> testMethod<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'/'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertViewHas</span><span class="br0">&#40;</span><span class="st_h">'name'</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertViewHas</span><span class="br0">&#40;</span><span class="st_h">'age'</span><span class="sy0">,</span> <span class="re0">$value</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT14 SECTION "assertViewHas" [3968-4180] -->
<h3 class="sectionedit15" id="assertsessionhas">assertSessionHas</h3>
<div class="level3">

<p>
Asserting The Session Has Some Data
</p>
<pre class="code php"><span class="kw2">public</span> <span class="kw2">function</span> testMethod<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'/'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertSessionHas</span><span class="br0">&#40;</span><span class="st_h">'name'</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertSessionHas</span><span class="br0">&#40;</span><span class="st_h">'age'</span><span class="sy0">,</span> <span class="re0">$value</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT15 SECTION "assertSessionHas" [4181-4407] -->
<h3 class="sectionedit16" id="assertsessionhaserrors">assertSessionHasErrors</h3>
<div class="level3">

<p>
Asserting The Session Has Errors
</p>
<pre class="code php"><span class="kw2">public</span> <span class="kw2">function</span> testMethod<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'/'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertSessionHasErrors</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Asserting the session has errors for a given key...</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertSessionHasErrors</span><span class="br0">&#40;</span><span class="st_h">'name'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Asserting the session has errors for several keys...</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertSessionHasErrors</span><span class="br0">&#40;</span><span class="br0">&#91;</span><span class="st_h">'name'</span><span class="sy0">,</span> <span class="st_h">'age'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT16 SECTION "assertSessionHasErrors" [4408-4810] -->
<h3 class="sectionedit17" id="asserthasoldinput">assertHasOldInput</h3>
<div class="level3">

<p>
Asserting Old Input Has Some Data
</p>
<pre class="code php"><span class="kw2">public</span> <span class="kw2">function</span> testMethod<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="st_h">'GET'</span><span class="sy0">,</span> <span class="st_h">'/'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">assertHasOldInput</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT17 SECTION "assertHasOldInput" [4811-4988] -->
<h3 class="sectionedit18" id="helper_methods">1.4.5 Helper Methods</h3>
<div class="level3">

<p>
Class TestCase có nhiều các helper giúp cho việc testing dễ dàng hơn
</p>

</div>
<!-- EDIT18 SECTION "1.4.5 Helper Methods" [4989-5101] -->
<h3 class="sectionedit19" id="them_gỡ_session">Thêm &amp; gỡ Session</h3>
<div class="level3">
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">session</span><span class="br0">&#40;</span><span class="br0">&#91;</span><span class="st_h">'foo'</span> <span class="sy0">=&gt;</span> <span class="st_h">'bar'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">flushSession</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT19 SECTION "Thêm & gỡ Session" [5102-5210] -->
<h3 class="sectionedit20" id="thiết_lập_cấp_quyền_thanh_vien">Thiết lập cấp quyền thành viên</h3>
<div class="level3">
<pre class="code php"><span class="re0">$user</span> <span class="sy0">=</span> <span class="kw2">new</span> User<span class="br0">&#40;</span><span class="br0">&#91;</span><span class="st_h">'name'</span> <span class="sy0">=&gt;</span> <span class="st_h">'John'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">be</span><span class="br0">&#40;</span><span class="re0">$user</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT20 SECTION "Thiết lập cấp quyền thành viên" [5211-5338] -->
<h3 class="sectionedit21" id="cai_lại_database">Cài lại database</h3>
<div class="level3">
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">seed</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">seed</span><span class="br0">&#40;</span><span class="st_h">'DatabaseSeeder'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT21 SECTION "Cài lại database" [5339-5436] -->
<h3 class="sectionedit22" id="refreshing_the_application">1.4.6 Refreshing The Application</h3>
<div class="level3">

<p>
Nếu ta muốn refresh lại Application khi testing 1 method, ta có thể dùng:
</p>
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">refreshApplication</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Phương thức trên sẽ reset lại các bindings, mock , IoC container. 
</p>

</div>
<!-- EDIT22 SECTION "1.4.6 Refreshing The Application" [5437-5689] -->
<h3 class="sectionedit23" id="table_of_assert_method">1.4.7 Table of Assert Method</h3>
<div class="level3">
<div class="table sectionedit24"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> </th><th class="col1"> </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign">AssertTrue/AssertFalse	</td><td class="col1"> Check the input to verify it equals true/false </td>
	</tr>
	<tr class="row2">
		<td class="col0">AssertEquals </td><td class="col1 rightalign">	Check the result against another input for a match </td>
	</tr>
	<tr class="row3">
		<td class="col0">AssertGreaterThan </td><td class="col1"> Check the result to see if it’s larger than a value (there’s also LessThan, GreaterThanOrEqual, and LessThanOrEqual) </td>
	</tr>
	<tr class="row4">
		<td class="col0">AssertContains </td><td class="col1"> Check that the input contains a certain value </td>
	</tr>
	<tr class="row5">
		<td class="col0">AssertType </td><td class="col1"> Check that a variable is of a certain type </td>
	</tr>
	<tr class="row6">
		<td class="col0">AssertNull </td><td class="col1"> Check that a variable is null </td>
	</tr>
	<tr class="row7">
		<td class="col0">AssertFileExists </td><td class="col1"> Verify that a file exists </td>
	</tr>
	<tr class="row8">
		<td class="col0">AssertRegExp </td><td class="col1">Check the input against a regular expression</td>
	</tr>
</table></div>
<!-- EDIT24 TABLE [5730-6303] -->
</div>
<!-- EDIT23 SECTION "1.4.7 Table of Assert Method" [5690-6304] -->
<h2 class="sectionedit25" id="phpunit_methods_and_properties">1.5 PHPUnit methods and properties</h2>
<div class="level2">

</div>
<!-- EDIT25 SECTION "1.5 PHPUnit methods and properties" [6305-6352] -->
<h3 class="sectionedit26" id="app">$app</h3>
<div class="level3">

<p>
The instance of the Laravel 5.1 application.
</p>

</div>
<!-- EDIT26 SECTION "$app" [6353-6414] -->
<h3 class="sectionedit27" id="code">$code</h3>
<div class="level3">

<p>
The latest code returned by artisan.
</p>

</div>
<!-- EDIT27 SECTION "$code" [6415-6469] -->
<h3 class="sectionedit28" id="call">call</h3>
<div class="level3">

<p>
Calls the given <abbr title="Uniform Resource Identifier">URI</abbr> and returns the response.
</p>
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">call</span><span class="br0">&#40;</span><span class="re0">$method</span><span class="sy0">,</span> <span class="re0">$uri</span><span class="sy0">,</span> <span class="re0">$parameters</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$cookies</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$files</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$server</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT28 SECTION "call" [6470-6655] -->
<h3 class="sectionedit29" id="callsecure">callSecure</h3>
<div class="level3">

<p>
Calls the given HTTPS <abbr title="Uniform Resource Identifier">URI</abbr> and returns the response.
</p>
<pre class="code php">callSecure<span class="br0">&#40;</span><span class="re0">$method</span><span class="sy0">,</span> <span class="re0">$uri</span><span class="sy0">,</span> <span class="re0">$parameters</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$cookies</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$files</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$server</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT29 SECTION "callSecure" [6656-6852] -->
<h3 class="sectionedit30" id="action">action</h3>
<div class="level3">

<p>
Calls a controller action and returns the response.
</p>
<pre class="code php">action<span class="br0">&#40;</span><span class="re0">$method</span><span class="sy0">,</span> <span class="re0">$action</span><span class="sy0">,</span> <span class="re0">$wildcards</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$parameters</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$cookies</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$files</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$server</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT30 SECTION "action" [6853-7060] -->
<h3 class="sectionedit31" id="route">route</h3>
<div class="level3">

<p>
Calls a named route and returns the response.
</p>
<pre class="code php">route<span class="br0">&#40;</span><span class="re0">$method</span><span class="sy0">,</span> <span class="re0">$name</span><span class="sy0">,</span> <span class="re0">$routeParameters</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$parameters</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$cookies</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$files</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$server</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$content</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT31 SECTION "route" [7061-7264] -->
<h3 class="sectionedit32" id="instance">instance</h3>
<div class="level3">

<p>
Register an instance of an object in the container.
</p>
<pre class="code php">instance<span class="br0">&#40;</span><span class="re0">$abstract</span><span class="sy0">,</span> <span class="re0">$object</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT32 SECTION "instance" [7265-7384] -->
<h3 class="sectionedit33" id="expectsevents">expectsEvents</h3>
<div class="level3">

<p>
Specify a list of events that should be fired for the given operation.
</p>
<pre class="code php">expectsEvents<span class="br0">&#40;</span><span class="re0">$events</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT33 SECTION "expectsEvents" [7385-7522] -->
<h3 class="sectionedit34" id="withoutevents">withoutEvents</h3>
<div class="level3">

<p>
Mock the event dispatcher so all events are silenced.
</p>
<pre class="code php">withoutEvents<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT34 SECTION "withoutEvents" [7523-7636] -->
<h3 class="sectionedit35" id="expectsjobs">expectsJobs</h3>
<div class="level3">

<p>
Specify a list of jobs that should be dispatched for the given operation.
</p>
<pre class="code php">expectsJobs<span class="br0">&#40;</span><span class="re0">$jobs</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT35 SECTION "expectsJobs" [7637-7771] -->
<h3 class="sectionedit36" id="withsession">withSession</h3>
<div class="level3">

<p>
Set the session to the given array.
</p>
<pre class="code php">withSession<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a> <span class="re0">$data</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT36 SECTION "withSession" [7772-7874] -->
<h3 class="sectionedit37" id="session">session</h3>
<div class="level3">

<p>
Starts session and sets the session values from the array.
</p>
<pre class="code php">session<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a> <span class="re0">$data</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT37 SECTION "session" [7875-7992] -->
<h3 class="sectionedit38" id="flushsession">flushSession</h3>
<div class="level3">

<p>
Flushes the contents of the current session.
</p>
<pre class="code php">flushSession<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT38 SECTION "flushSession" [7993-8095] -->
<h3 class="sectionedit39" id="startsession">startSession</h3>
<div class="level3">

<p>
Starts the application’s session.
</p>
<pre class="code php">startSession<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT39 SECTION "startSession" [8096-8189] -->
<h3 class="sectionedit40" id="actingas">actingAs</h3>
<div class="level3">

<p>
(Fluent) Sets the currently logged in user for the application.
</p>
<pre class="code php">actingAs<span class="br0">&#40;</span><span class="re0">$user</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT40 SECTION "actingAs" [8190-8308] -->
<h3 class="sectionedit41" id="be">be</h3>
<div class="level3">

<p>
Sets the currently logged in user for the application.
</p>
<pre class="code php">be<span class="br0">&#40;</span><span class="re0">$user</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT41 SECTION "be" [8309-8406] -->
<h3 class="sectionedit42" id="seeindatabase">seeInDatabase</h3>
<div class="level3">

<p>
(Fluent) Asserts a given where condition exists in the database.
</p>
<pre class="code php">seeInDatabase<span class="br0">&#40;</span><span class="re0">$table</span><span class="sy0">,</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a> <span class="re0">$data</span><span class="sy0">,</span> <span class="re0">$connection</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT42 SECTION "seeInDatabase" [8407-8570] -->
<h3 class="sectionedit43" id="notseeindatabase">notSeeInDatabase</h3>
<div class="level3">

<p>
(Fluent) Asserts a given where condition does not exist in the database.
</p>
<pre class="code php">notSeeInDatabase<span class="br0">&#40;</span><span class="re0">$table</span><span class="sy0">,</span> <span class="re0">$array</span> <span class="re0">$data</span><span class="sy0">,</span> <span class="re0">$connection</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT43 SECTION "notSeeInDatabase" [8571-8751] -->
<h3 class="sectionedit44" id="missingfromdatabase">missingFromDatabase</h3>
<div class="level3">

<p>
(Fluent) Alias to notSeeInDatabase().
</p>
<pre class="code php">missingFromDatabase<span class="br0">&#40;</span><span class="re0">$table</span><span class="sy0">,</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a> <span class="re0">$data</span><span class="sy0">,</span> <span class="re0">$connection</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT44 SECTION "missingFromDatabase" [8752-8900] -->
<h3 class="sectionedit45" id="seed">seed</h3>
<div class="level3">

<p>
Seeds the database.
</p>
<pre class="code php">seed<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT45 SECTION "seed" [8901-8962] -->
<h3 class="sectionedit46" id="artisan">artisan</h3>
<div class="level3">

<p>
Executes the artisan command and returns the code.
</p>
<pre class="code php">artisan<span class="br0">&#40;</span><span class="re0">$command</span><span class="sy0">,</span> <span class="re0">$parameters</span> <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT46 SECTION "artisan" [8963-9087] -->
<h2 class="sectionedit47" id="using_gulp_for_tdd">1.6 Using Gulp for TDD</h2>
<div class="level2">
<blockquote><div class="no">
<a href="http://gulpjs.com/" class="urlextern" title="http://gulpjs.com/"  rel="nofollow">Gulp</a>: là hệ thống tự chạy viết bằng Javascript.</div></blockquote>
<blockquote><div class="no">
TDD : Test Driven Development.</div></blockquote>
<blockquote><div class="no">
Laravel Exlixir: là 1 api dùng để định nghĩa các tác vụ của Gulp.</div></blockquote>

<p>
Ta có thể dùng Gulp để app tự chạy UnitTest khi nội dung file thay đổi.
</p>

</div>
<!-- EDIT47 SECTION "1.6 Using Gulp for TDD" [9088-9413] -->
<h3 class="sectionedit48" id="install_gulp">1.6.1 Install Gulp</h3>
<div class="level3">

<p>
<strong>Install Gulp globally</strong>
</p>
<pre class="code">$ npm install --global gulp</pre>

<p>
<strong> Install gulp in your project devDependencies:</strong>
</p>
<pre class="code">$ npm install --save-dev gulp</pre>

<p>
<strong>Create a gulpfile.js at the root of your project:</strong>
</p>
<pre class="code">var gulp = require(&#039;gulp&#039;);

gulp.task(&#039;default&#039;, function() {
  // place code for your default task here
});</pre>

<p>
<strong>Run gulp:</strong>
</p>
<pre class="code">$ gulp</pre>

<p>
<strong>Install laravel-elixir</strong>
</p>

<p>
Cập nhật file package.json
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=41" title="Download Snippet" class="mediafile mf_json">package.json</a></dt>
<dd><pre class="code file js">{
  &quot;private&quot;: true,
  &quot;devDependencies&quot;: {
    &quot;gulp&quot;: &quot;^3.8.8&quot;
  },
  &quot;dependencies&quot;: {
    &quot;laravel-elixir&quot;: &quot;^3.0.0&quot;,
    &quot;bootstrap-sass&quot;: &quot;^3.0.0&quot;
  }
}</pre>
</dd></dl>

<p>
Cài đặt laravel-elixir
</p>
<pre class="code">$ npm install</pre>

</div>
<!-- EDIT48 SECTION "1.6.1 Install Gulp" [9414-10129] -->
<h3 class="sectionedit49" id="run_gulp">1.6.2 Run Gulp</h3>
<div class="level3">

<p>
Cập nhật file gulpfile.js
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=43" title="Download Snippet" class="mediafile mf_js">gulpfile.js</a></dt>
<dd><pre class="code file js">var elixir = require('laravel-elixir');
&nbsp;
elixir(function(mix) {
    mix.phpUnit();
});</pre>
</dd></dl>

<p>
Chạy gulp tự động :
</p>
<pre class="code">$ gulp tdd</pre>

</div>
<!-- EDIT49 SECTION "1.6.2 Run Gulp" [10130-10356] -->
<h1 class="sectionedit50" id="codeception">2. Codeception</h1>
<div class="level1">

</div>
<!-- EDIT50 SECTION "2. Codeception" [10357-10385] -->
<h2 class="sectionedit51" id="giới_thiệu1">2.1 Giới thiệu</h2>
<div class="level2">

<p>
<a href="http://codeception.com/" class="urlextern" title="http://codeception.com/"  rel="nofollow">Codeception</a> là 1 một BBD PHP test framework.
Codeception bao gồm các loại như :
</p>
<ul>
<li class="level1"><div class="li"> PHPUnit test</div>
</li>
<li class="level1"><div class="li"> Acceptance Testing : test giao diện bằng Selenium WebDriver, PhpBrowser.</div>
</li>
<li class="level1"><div class="li"> Functional Testing : có thể test nhiều framwork như: ymfony2, Laravel, Yii, Phalcon, Zend Framework, Kohana, Databases, REST, SOAP, CodeCoverage.</div>
</li>
<li class="level1"><div class="li"> <abbr title="Application Programming Interface">API</abbr> Testing : REST, SOAP, XML-RPC via PHPBrowser or PHP Frameworks.</div>
</li>
</ul>
<blockquote><div class="no">
<strong>BBD</strong>: Behavior Driven Development</div></blockquote>

</div>
<!-- EDIT51 SECTION "2.1 Giới thiệu" [10386-10899] -->
<h2 class="sectionedit52" id="cai_dặt">2.2 Cài đặt</h2>
<div class="level2">

<p>
Cài bằng composer
</p>
<pre class="code">$ php composer.phar require &quot;codeception/codeception:*&quot;</pre>

<p>
Download source code về thư mục gốc của ứng dụng
</p>
<pre class="code">$ wget http://codeception.com/codecept.phar</pre>

<p>
Khởi tạo codeception:
</p>
<pre class="code">$ php codecept.phar bootstrap</pre>

<p>
Tạo 1 acceptance test;
</p>
<pre class="code">$ php codecept.phar generate:cept acceptance Welcome</pre>

</div>
<!-- EDIT52 SECTION "2.2 Cài đặt" [10900-11305] -->
<h1 class="sectionedit53" id="acceptance_testing_functional_testing">3. Acceptance Testing &amp; Functional Testing</h1>
<div class="level1">
<blockquote><div class="no">
<strong>Acceptance testing</strong> can be performed by a non-technical person. That person can be your tester, manager or even client. If you are developing a web-application (and probably you are) the tester needs nothing more than a web browser to check that your site works correctly</div></blockquote>
<blockquote><div class="no">
<strong>Functional testing</strong>: Now that we&#039;ve written some acceptance tests, functional tests are almost the same, with just one major difference: functional tests don&#039;t require a web server to run tests. In simple terms we set $_REQUEST, $_GET and $_POST variables and then we execute application from a test. This may be valuable as functional tests are faster and provide detailed stack traces on failures.</div></blockquote>

</div>
<!-- EDIT53 SECTION "3. Acceptance Testing & Functional Testing" [11306-12044] -->
<h2 class="sectionedit54" id="functional_testing">3.1 Functional Testing</h2>
<div class="level2">

</div>
<!-- EDIT54 SECTION "3.1 Functional Testing" [12045-12079] -->
<h3 class="sectionedit55" id="cấu_hinh_functional_testing">3.1.1 Cấu hình Functional Testing</h3>
<div class="level3">

<p>
Để tạo 1 functional Contact Testing , ta chạy command sau:
</p>
<pre class="code">$ php codecept.phar generate:cept functional Contact  </pre>

<p>
Cập nhật nội dung file functional.suite.yml: thêm module laravel5 vào function test
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=50" title="Download Snippet" class="mediafile mf_yml">function.suite.yml</a></dt>
<dd><pre class="code file yml">class_name: FunctionalTester  
modules:  
    enabled: 
        - Laravel5
        - \Helper\Functional</pre>
</dd></dl>

<p>
Build lại codeception
</p>
<pre class="code">$ php codecept.phar build  </pre>

</div>
<!-- EDIT55 SECTION "3.1.1 Cấu hình Functional Testing" [12080-12564] -->
<h3 class="sectionedit56" id="functional_testing_mẫu">3.1.2 Functional Testing mẫu</h3>
<div class="level3">

<p>
Nội dung cần test có kịch bản như sau:
</p>
<ul>
<li class="level1"><div class="li"> Tôi đang ở trang contact</div>
</li>
<li class="level1"><div class="li"> Tôi điền đúng thông tin vào form contact :name, email and comment.</div>
</li>
<li class="level1"><div class="li"> Tôi nhấn nút submit</div>
</li>
<li class="level1"><div class="li"> Tôi vẫn ở trang contact và tôi thấy message “Message sent!”</div>
</li>
</ul>

<p>
Functional Testing được viết như sau:
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=52" title="Download Snippet" class="mediafile mf_php">ContactCept.php</a></dt>
<dd><pre class="code file php"><span class="kw2">&lt;?php</span>
 <span class="re0">$I</span> <span class="sy0">=</span> <span class="kw2">new</span> FunctionalTester<span class="br0">&#40;</span><span class="re0">$scenario</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">am</span><span class="br0">&#40;</span><span class="st_h">'guest'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">wantTo</span><span class="br0">&#40;</span><span class="st_h">'send email using contact form.'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">amOnPage</span><span class="br0">&#40;</span><span class="st_h">'/contact'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">submitForm</span><span class="br0">&#40;</span><span class="st_h">'.contact-form'</span><span class="sy0">,</span> <span class="br0">&#91;</span>
    <span class="st_h">'name'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Mario Basic'</span><span class="sy0">,</span>
    <span class="st_h">'email'</span> <span class="sy0">=&gt;</span> <span class="st_h">'test@test.com'</span><span class="sy0">,</span>
    <span class="st_h">'comment'</span> <span class="sy0">=&gt;</span> <span class="st_h">'This is a codeception test email.'</span>
<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">seeCurrentUrlEquals</span><span class="br0">&#40;</span><span class="st_h">'/contact'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">see</span><span class="br0">&#40;</span><span class="st_h">'Message sent!'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>

<p>
Ta chuẩn 2 file source code như sau:
1. File Contact Controller:
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=53" title="Download Snippet" class="mediafile mf_php">ContactController.php</a></dt>
<dd><pre class="code file php"><span class="kw2">namespace</span> App\Http\Controllers<span class="sy0">;</span>
&nbsp;
<span class="kw2">use</span> Illuminate\Http\Request<span class="sy0">;</span>
&nbsp;
<span class="kw2">use</span> App\Http\Requests<span class="sy0">;</span>
<span class="kw2">use</span> App\Http\Controllers\Controller<span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span> ContactController <span class="kw2">extends</span> Controller
<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> getIndex<span class="br0">&#40;</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">return</span> view<span class="br0">&#40;</span><span class="st_h">'contact.index'</span><span class="sy0">,</span> <span class="br0">&#91;</span><span class="st_h">'msg'</span> <span class="sy0">=&gt;</span> <span class="st_h">''</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> postIndex<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> view<span class="br0">&#40;</span><span class="st_h">'contact.index'</span><span class="sy0">,</span> <span class="br0">&#91;</span><span class="st_h">'msg'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Message sent!'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span></pre>
</dd></dl>

<p>
2. File contact view :
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=54" title="Download Snippet" class="mediafile mf_php">index.blade.php</a></dt>
<dd><pre class="code file php"><span class="sy0">&lt;!</span>DOCTYPE<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>html<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>title<span class="sy0">&gt;</span>Demo Functional Testing<span class="sy0">&lt;/</span>title<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>body<span class="sy0">&gt;</span>
    <span class="sy0">&lt;</span>form action<span class="sy0">=</span><span class="st0">&quot;&quot;</span> method<span class="sy0">=</span><span class="st0">&quot;post&quot;</span> accept<span class="sy0">-</span>charset<span class="sy0">=</span><span class="st0">&quot;utf-8&quot;</span> <span class="kw2">class</span><span class="sy0">=</span><span class="st0">&quot;contact-form&quot;</span><span class="sy0">&gt;</span>
        <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;hidden&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;_token&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;{{ csrf_token() }}&quot;</span><span class="sy0">&gt;</span>
        <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;name&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;&quot;</span> placeholder<span class="sy0">=</span><span class="st0">&quot;&quot;</span><span class="sy0">&gt;</span>
        <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;email&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;email&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;&quot;</span><span class="sy0">&gt;</span>
        <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;text&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;comment&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;&quot;</span><span class="sy0">&gt;</span>
        <span class="sy0">&lt;</span>input type<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> value<span class="sy0">=</span><span class="st0">&quot;OK&quot;</span><span class="sy0">&gt;</span>
    <span class="sy0">&lt;/</span>form<span class="sy0">&gt;</span>
    <span class="br0">&#123;</span><span class="br0">&#123;</span> <span class="re0">$msg</span> <span class="br0">&#125;</span><span class="br0">&#125;</span>
<span class="sy0">&lt;/</span>body<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>html<span class="sy0">&gt;</span></pre>
</dd></dl>

<p>
Và giờ ta chạy Functional Testing để kiểm tra kịch bản chạy có pass được hết hay không.
</p>
<pre class="code">// Chạy tất cả các file Functional Testing
$ php codecept.phar run functional 

// Chạy 1 Functional Testing
$ php codecept.phar run functional ContactCept

// Chạy 1 Functional Testing theo từng bước trong kịch bản
$ php codecept.phar run functional ContactCept --steps
</pre>

<p>
<a href="/lib/exe/detail.php?id=testing&amp;media=capture_2015_08_28_09_08_29_282.png" class="media" title="capture_2015_08_28_09_08_29_282.png"><img src="/lib/exe/fetch.php?media=capture_2015_08_28_09_08_29_282.png" class="media" title="Fail Functional Testing" alt="Fail Functional Testing" /></a>
Demo chạy functional test bị lỗi. Khi pass test sẽ có dạng như sau :
</p>

<p>
<a href="/lib/exe/detail.php?id=testing&amp;media=capture_2015_08_28_09_23_37_673.png" class="media" title="capture_2015_08_28_09_23_37_673.png"><img src="/lib/exe/fetch.php?media=capture_2015_08_28_09_23_37_673.png" class="media" title="Success Functional Testing" alt="Success Functional Testing" /></a>
</p>

</div>
<!-- EDIT56 SECTION "3.1.2 Functional Testing mẫu" [12565-14959] -->
<h3 class="sectionedit57" id="demo_project">3.1.4 Demo project</h3>
<div class="level3">

<p>
Link: <a href="https://github.com/janhenkgerritsen/codeception-laravel5-sample" class="urlextern" title="https://github.com/janhenkgerritsen/codeception-laravel5-sample"  rel="nofollow">Codeception Laravel 5 Sample</a>
</p>

<p>
Clone repo
</p>
<pre class="code">$ git clone https://github.com/janhenkgerritsen/codeception-laravel5-sample.git testing</pre>

<p>
Create your .env file from the example file: 
</p>
<pre class="code">$ cp .env.testing .env</pre>

<p>
Install composer dependencies: 
</p>
<pre class="code">$ composer install</pre>

<p>
Create databases by creating the following files:
</p>
<pre class="code">$ touch storage/database.sqlite
$ touch storage/testing.sqlite</pre>

<p>
Run the following commands:
</p>
<pre class="code">$ php artisan migrate
$ php artisan migrate --database=sqlite_testing</pre>

</div>
<!-- EDIT57 SECTION "3.1.4 Demo project" [14960-15599] -->
<h2 class="sectionedit58" id="acceptance_test">3.2 Acceptance Test</h2>
<div class="level2">

<p>
Acceptance Test: dùng để test giao diện , dành cho những người không biết về kỹ thuật. Công việc của Tester chỉ là viết kịch bản và theo dõi test trực tiếp trên trình duyệt. 1 Kịch bản mẫu về acceptance test:
</p>
<pre class="code">I WANT TO SIGN IN
I am on page &#039;/login&#039;
I fill field &#039;username&#039;, &#039;davert&#039;
I fill field &#039;password&#039;, &#039;qwerty&#039;
I click &#039;LOGIN&#039;
I see &#039;Welcome, Davert!&#039;</pre>

<p>
Chuyển qua php như sau :
</p>
<pre class="code php"><span class="kw2">&lt;?php</span>
<span class="re0">$I</span> <span class="sy0">=</span> <span class="kw2">new</span> AcceptanceTester<span class="br0">&#40;</span><span class="re0">$scenario</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">wantTo</span><span class="br0">&#40;</span><span class="st_h">'sign in'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">amOnPage</span><span class="br0">&#40;</span><span class="st_h">'/login'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">fillField</span><span class="br0">&#40;</span><span class="st_h">'username'</span><span class="sy0">,</span> <span class="st_h">'davert'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">fillField</span><span class="br0">&#40;</span><span class="st_h">'password'</span><span class="sy0">,</span> <span class="st_h">'qwerty'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">click</span><span class="br0">&#40;</span><span class="st_h">'LOGIN'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">see</span><span class="br0">&#40;</span><span class="st_h">'Welcome, Davert!'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="sy1">?&gt;</span></pre>

</div>
<!-- EDIT58 SECTION "3.2 Acceptance Test" [15600-16324] -->
<h3 class="sectionedit59" id="php_browser">3.2.1 PHP Browser</h3>
<div class="level3">

<p>
Nếu ta không muốn chạy trực tiếp trên trình duyệt ta có thể dùng PHP Browser chạy ngầm. Để cấu hình PHP Browser ta sửa file acceptance.suite.yml như sau:
</p>
<pre class="code java">class_name<span class="sy0">:</span> AcceptanceTester
modules<span class="sy0">:</span>
    enabled<span class="sy0">:</span>
        <span class="sy0">-</span> PhpBrowser<span class="sy0">:</span>
            url<span class="sy0">:</span> http<span class="sy0">:</span><span class="co1">//demo.app</span>
        <span class="sy0">-</span> \Helper\Acceptance</pre>

<p>
Chạy lệnh build để load cấu hình
</p>
<pre class="code">$ php codecept.phar build</pre>

<p>
Ta tạo 1 file kịch bản giống như trên ( functional Test) /tests/acceptance/ContactCept.php
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=65" title="Download Snippet" class="mediafile mf_php">ContactCept.php</a></dt>
<dd><pre class="code file php"><span class="re0">$I</span> <span class="sy0">=</span> <span class="kw2">new</span> AcceptanceTester<span class="br0">&#40;</span><span class="re0">$scenario</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">amOnPage</span><span class="br0">&#40;</span><span class="st_h">'/contact'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">submitForm</span><span class="br0">&#40;</span><span class="st_h">'.contact-form'</span><span class="sy0">,</span> <span class="br0">&#91;</span>
    <span class="st_h">'name'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Mario Basic'</span><span class="sy0">,</span>
    <span class="st_h">'email'</span> <span class="sy0">=&gt;</span> <span class="st_h">'test@test.com'</span><span class="sy0">,</span>
    <span class="st_h">'comment'</span> <span class="sy0">=&gt;</span> <span class="st_h">'This is a codeception test email.'</span>
<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">seeCurrentUrlEquals</span><span class="br0">&#40;</span><span class="st_h">'/contact'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">see</span><span class="br0">&#40;</span><span class="st_h">'Message sent!'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>

<p>
Bắt đầu test: ( trước đó ta phải cài đặt desktop, Selenium server , java, firefox ) . Lệnh test này phải được chạy trong bên trong màn hình desktop.
</p>
<pre class="code">$ php codecept.phar run acceptance ContactCept</pre>

</div>
<!-- EDIT59 SECTION "3.2.1 PHP Browser" [16325-17440] -->
<h3 class="sectionedit60" id="selenium_server_phantom_js">3.2.2 Selenium Server &amp; Phantom JS</h3>
<div class="level3">

<p>
Để chạy testing trên trình duyệt ta phải cài đặt 1 server selenium hoặc 1 webdriver PhantomJS[optional].
</p>
<blockquote><div class="no">
Selenium automates browsers. That&#039;s it! What you do with that power is entirely up to you. Primarily, it is for automating web applications for testing purposes, but is certainly not limited to just that. Boring web-based administration tasks can (and should!) also be automated as well.</div></blockquote>

<p>
Download Selenium Server vào trong thư mục root của app:
</p>

<p>
<a href="http://goo.gl/yLJLZg" class="urlextern" title="http://goo.gl/yLJLZg"  rel="nofollow">Selenium Server</a>
</p>
<blockquote><div class="no">
PhantomJS is a headless alternative to Selenium Server that implements the WebDriver protocol. It allows you to run Selenium tests on a server without a <abbr title="Graphical User Interface">GUI</abbr> installed.</div></blockquote>

<p>
Download &amp; Install PhantomJS :
</p>

<p>
<a href="http://phantomjs.org/download.html" class="urlextern" title="http://phantomjs.org/download.html"  rel="nofollow">PhantomJS</a>
</p>

</div>
<!-- EDIT60 SECTION "3.2.2 Selenium Server & Phantom JS" [17441-18258] -->
<h3 class="sectionedit61" id="cac_buớc_chạy_acceptance_test_với_selenium">3.2.3 Các bước chạy Acceptance Test với Selenium</h3>
<div class="level3">

<p>
<strong> Cài giao diện desktop cho Ubuntu </strong>
</p>

<p>
Link gốc : <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-14-04" class="urlextern" title="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-14-04"  rel="nofollow">Tut install desktop on Ubuntu</a>
- Install Desktop Environment and VNC Server
</p>
<pre class="code">sudo apt-get update
sudo apt-get install xfce4 xfce4-goodies tightvncserver</pre>

<p>
To complete the VNC server&#039;s initial configuration, use the vncserver command to set up a secure password:
</p>
<pre class="code">vncserver</pre>

<p>
 - Configure VNC Server
Since we are going to be changing how our VNC servers are configured, we&#039;ll need to first stop the VNC server instance that is running on port 5901:
</p>
<pre class="code">vncserver -kill :1</pre>

<p>
Before we begin configuring our new xstartup file, let&#039;s back up the original in case we need it later:
</p>
<pre class="code">mv ~/.vnc/xstartup ~/.vnc/xstartup.bak</pre>

<p>
Now we can open a new xstartup file with nano:
</p>
<pre class="code">nano ~/.vnc/xstartup</pre>

<p>
Insert these commands into the file so that they are performed automatically whenever you start or restart your VNC server:
</p>
<pre class="code">#!/bin/bash
xrdb $HOME/.Xresources
startxfce4 &amp;</pre>

<p>
The first command in the file, xrdb $HOME/.Xresources, tells VNC&#039;s <abbr title="Graphical User Interface">GUI</abbr> framework to read the server user&#039;s .Xresources file. .Xresources is where a user can make changes to certain settings of the graphical desktop, like terminal colors, cursor themes, and font rendering.
</p>

<p>
The second command simply tells the server to launch XFCE, which is where you will find all of the graphical software that you need to comfortably manage your server.
</p>

<p>
To ensure that the VNC server will be able to use this new startup file properly, we&#039;ll need to grant executable privileges to it:
</p>
<pre class="code">sudo chmod +x ~/.vnc/xstartup</pre>

</div>
<!-- EDIT61 SECTION "3.2.3 Các bước chạy Acceptance Test với Selenium" [18259-20044] -->
<h3 class="sectionedit62" id="create_a_vnc_service_file">Create a VNC Service File</h3>
<div class="level3">

<p>
To easily control our new VNC server, we should set it up as an Ubuntu service. This will allow us to start, stop, and restart our VNC server as needed.
</p>

<p>
First, open a new service file in /etc/init.d with nano:
</p>
<pre class="code">sudo nano /etc/init.d/vncserver</pre>

<p>
The first block of data will be where we declare some common settings that VNC will be referring to a lot, like our username and the display resolution.
</p>
<pre class="code">#!/bin/bash
PATH=&quot;$PATH:/usr/bin/&quot;
export USER=&quot;vagrant&quot;
DISPLAY=&quot;1&quot;
DEPTH=&quot;16&quot;
GEOMETRY=&quot;1024x768&quot;
OPTIONS=&quot;-depth ${DEPTH} -geometry ${GEOMETRY} :${DISPLAY} -localhost&quot;
. /lib/lsb/init-functions</pre>

<p>
Be sure to replace user with the non-root user that you have set up, and change 1024&times;768 if you want to use another screen resolution for your virtual display.
</p>

<p>
Next, we can start inserting the command instructions that will allow us to manage the new service. The following block binds the command needed to start a VNC server, and feedback that it is being started, to the command keyword start.
</p>
<pre class="code">case &quot;$1&quot; in
start)
log_action_begin_msg &quot;Starting vncserver for user &#039;${USER}&#039; on localhost:${DISPLAY}&quot;
su ${USER} -c &quot;/usr/bin/vncserver ${OPTIONS}&quot;
;;</pre>

<p>
The next block creates the command keyword stop, which will immediately kill an existing VNC server instance.
</p>
<pre class="code">stop)
log_action_begin_msg &quot;Stopping vncserver for user &#039;${USER}&#039; on localhost:${DISPLAY}&quot;
su ${USER} -c &quot;/usr/bin/vncserver -kill :${DISPLAY}&quot;
;;</pre>

<p>
The final block is for the command keyword restart, which is simply the two previous commands (stop and start) combined into one command.
</p>
<pre class="code">restart)
$0 stop
$0 start
;;
esac
exit 0</pre>

<p>
Once all of those blocks are in your service script, you can save and close that file. Make this service script executable, so that you can use the commands that you just set up:
</p>
<pre class="code">sudo chmod +x /etc/init.d/vncserver
sudo service vncserver start</pre>

<p>
- Connect to Your VNC Desktop
To test your VNC server, you&#039;ll need to use a client that supports VNC connections over SSH tunnels. If you are using Windows, you could use TightVNC, RealVNC, or UltraVNC. Mac <abbr title="Operating System">OS</abbr> X users can use the built-in Screen Sharing, or can use a cross-platform app like RealVNC.
</p>

<p>
First, we need to create an SSH connection on your local computer that securely forwards to the localhost connection for VNC. You can do this via the terminal on Linux or <abbr title="Operating System">OS</abbr> X via the following command:
</p>
<pre class="code">ssh -L 5901:127.0.0.1:5901 -N -f -l user server_ip_address

// Thay user vagrant , ip 192.168.10.10
ssh -L 5901:127.0.0.1:5901 -N -f -l vagrant 192.168.10.10</pre>

<p>
Next, you can use your VNC viewer to connect to the VNC server at localhost:5901. Make sure you don&#039;t forget that :5901 at the end, as that is the only port that the VNC instance is accessible from.
</p>

<p>
<a href="/lib/exe/detail.php?id=testing&amp;media=capture_2015_09_01_11_07_23_24.png" class="media" title="capture_2015_09_01_11_07_23_24.png"><img src="/lib/exe/fetch.php?media=capture_2015_09_01_11_07_23_24.png" class="media" title="Ubuntu Desktop" alt="Ubuntu Desktop" /></a>
</p>

<p>
<strong>Chạy server Selenium</strong> :
</p>

<p>
Chạy server Selenium dùng ssh.
</p>
<pre class="code">// Nếu server chưa có java thì ta phải cài đặt java
sudo apt-get install default-jre

// Nếu chưa có firefox 
sudeo apt-get install firefox

// Chạy server selenium bằng ssh
$ java -jar selenium-server-standalone-2.47.1.jar</pre>

<p>
<strong>Cập nhật file config của Acceptance test</strong>, chọn trình duyệt chạy là firefox:
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=82" title="Download Snippet" class="mediafile mf_yml">acceptance.suite.yml</a></dt>
<dd><pre class="code file xml">class_name: AcceptanceTester
modules:
    enabled:
        - WebDriver:
            url: http://demo.app
            browser: firefox
            window_size: 1024x768
            wait: 10            
        - \Helper\Acceptance</pre>
</dd></dl>

<p>
<strong>Build lại file config:</strong>
</p>
<pre class="code">$ php codecept.phar build</pre>

<p>
<strong>Chạy Acceptance Test:</strong>
Trong giao diện desktop của Ubuntu , chạy lệnh test trong console
</p>
<pre class="code">$ php codecept.phar run acceptance ContactCept</pre>

<p>
Nội dung file ContactCept.php gần giống với file trong Functional Testing. Ta có thể thêm hàm wait để thấy rõ hơn trên duyệt. Khi chạy Test ta sẽ thấy 1 trình duyệt firefox bật lên trên màn hình và thực hiện các thao tác cần test.
</p>

<p>
<a href="/lib/exe/detail.php?id=testing&amp;media=capture_2015_09_01_11_12_07_164.png" class="media" title="capture_2015_09_01_11_12_07_164.png"><img src="/lib/exe/fetch.php?media=capture_2015_09_01_11_12_07_164.png" class="media" title="Run acceptance test with browser" alt="Run acceptance test with browser" /></a>
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=testing&amp;codeblock=85" title="Download Snippet" class="mediafile mf_php">ContactCept.php</a></dt>
<dd><pre class="code file php"><span class="kw2">&lt;?php</span>
<span class="re0">$I</span> <span class="sy0">=</span> <span class="kw2">new</span> AcceptanceTester<span class="br0">&#40;</span><span class="re0">$scenario</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">am</span><span class="br0">&#40;</span><span class="st_h">'guest'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">wantTo</span><span class="br0">&#40;</span><span class="st_h">'send email using contact form.'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">amOnPage</span><span class="br0">&#40;</span><span class="st_h">'/contact'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">submitForm</span><span class="br0">&#40;</span><span class="st_h">'.contact-form'</span><span class="sy0">,</span> <span class="br0">&#91;</span>
    <span class="st_h">'name'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Mario Basic'</span><span class="sy0">,</span>
    <span class="st_h">'email'</span> <span class="sy0">=&gt;</span> <span class="st_h">'test@test.com'</span><span class="sy0">,</span>
    <span class="st_h">'comment'</span> <span class="sy0">=&gt;</span> <span class="st_h">'This is a codeception test email.'</span>
<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">seeCurrentUrlEquals</span><span class="br0">&#40;</span><span class="st_h">'/contact'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">wait</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$I</span><span class="sy0">-&gt;</span><span class="me1">see</span><span class="br0">&#40;</span><span class="st_h">'Message sent!'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="sy1">?&gt;</span></pre>
</dd></dl>

</div>
<!-- EDIT62 SECTION "Create a VNC Service File" [20045-] -->